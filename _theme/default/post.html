<?php
    $config      = $GLOBALS['template_data']['config'];
    $html        = $GLOBALS['template_data']['html'];
    $menu_titles = $GLOBALS['template_data']['menu_titles'];
?>
<!DOCTYPE html>
<html lang="en-US">
<head>
    <title><?php if(isset($config['title'])) echo $config['title'].' - ';?>wiki.php</title>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="/_theme/default/sass/favicon.png">
    <link rel="stylesheet" type="text/css" href="./_theme/default/sass/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./_theme/default/sass/responsive.css">
    <link rel="stylesheet" type="text/css" href="./_theme/default/sass/main.css">

    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style type="text/css">

    </style>
</head>

<body class="page page-id-2 page-template-default">

        <!-- Start of Header -->
        <div class="header-wrapper">
            <header>
                <div class="container">

                    <div class="logo-container">
                        <!-- Website Logo -->
                        <a href="/" title="wiki.php">
                            <img src="./_theme/default/sass/logo.png" alt="wiki.php">
                        </a>
                        <span class="tag-line">用Markdown写wiki是一种什么样的体验？</span>
                    </div>

                    <!-- Start of Main Navigation -->
                    <nav class="main-nav">
                        <div class="menu-top-menu-container">
                            <ul id="menu-top-menu" class="clearfix">
                                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-266">
                                    <a href="#">Login</a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                    <!-- End of Main Navigation -->

                </div>
            </header>
        </div>
        <!-- End of Header -->

<!-- Start of Search Wrapper -->
<div class="search-area-wrapper">
    <div class="search-area container">
        <h3 class="search-header"><?php echo $config['title'];?></h3>
        <p class="search-tag-line" style="margin-bottom: 0px;"><?php echo $config['summary'];?></p>
        <p class="search-tag-line" style="text-align:right;">Last updated at <?php echo $config['date'];?></p>
    </div>
</div>
<!-- End of Search Wrapper -->

<!-- Start of Page Container -->
<div class="page-container">
    <div class="container">
        <div class="row">

            <!-- start of page content -->
            <div class="col-md-8 page-content">
                <article class="clearfix post-2 page type-page status-publish hentry">
                    <?php echo $html;?>
                </article>
            </div>
            <!-- end of page content -->

            <!-- start of sidebar -->
            <aside class="col-md-4 page-sidebar">
                <section class="widget">
                <div style="height: 30px;">
                    <b style="font-size:16px;">索引导航</b>
                    <a style="float:right;" href="#">[编辑本页]</a>
                </div>
                <ul>
                <?php
                    if( empty($menu_titles) ){
                        echo '<small><em>Markdown中未匹配到h1标题,无法建立索引导航.</em></small>';
                    }
                    foreach ($menu_titles as $h1 => $h2) {
                        echo "<ul>";
                        echo "<a href='#{$h1}'>{$h1}</a>";
                        foreach ($h2 as $title) {
                            echo "<li><a href='#{$title}'>{$title}</a></li>";
                        }
                        echo "</ul>";
                    }
                ?>
                </ul>
                </section>
            </aside>
            <!-- end of sidebar -->
        </div>
    </div>
</div>
<!-- End of Page Container -->


<!-- Start of Footer -->
<footer id="footer-wrapper">

    <!-- Footer Bottom -->
    <div id="footer-bottom-wrapper">
        <div id="footer-bottom" class="container">
            <div class="row">
                <div class="col-md-6">
                    <p class="copyright" style="color:#fff;">
                        Copyright © 2016. All Rights Reserved by 「<a style="color:#fff;" target="_blank" href="https://github.com/cmxiaocai/wiki.php">wiki.php</a>」.
                    </p>
                </div>
                <div class="col-md-6">
                        <ul class="social-nav clearfix">
                            <li>
                                <a target="_blank" href="https://github.com/cmxiaocai/wiki.php">
                                    <img src="/_theme/default/sass/github.png" style="width:30px;height:30px;" />
                                </a>
                            </li>
                        </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Footer Bottom -->

</footer>
<!-- End of Footer -->
<script src="./_theme/default/sass/js/jquery.min.js"></script>
<script type="text/javascript">
var wPos = $('.widget').position().top;
$(window).resize(function(){
    $('.widget').addClass('fixed').width( $('.page-sidebar').width() );
});
$(window).scroll(function(){
    var sTop = $(this).scrollTop();
    if (sTop > wPos+100) {
        $('.widget').addClass('fixed').width( $('.page-sidebar').width() );
    }else{
        $('.widget').removeClass('fixed');
    };
});

</script>
</body>

</html>